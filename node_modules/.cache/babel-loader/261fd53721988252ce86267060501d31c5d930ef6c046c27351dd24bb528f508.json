{"ast":null,"code":"import _objectSpread from\"C:/Users/Usuario/Desktop/intento de app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// src/pages/admin/Transactions.js\nimport React,{useEffect,useState}from'react';import{Search,Loader2,Eye,CheckCircle,XCircle,MessageSquare,RefreshCw}from'lucide-react';import{supabase}from'../../supabaseClient';/* eslint-disable react-hooks/exhaustive-deps */// Mapa simple de banderas por cÃ³digo\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const countryFlags={CO:'ðŸ‡¨ðŸ‡´',VE:'ðŸ‡»ðŸ‡ª',US:'ðŸ‡ºðŸ‡¸',PE:'ðŸ‡µðŸ‡ª',PA:'ðŸ‡µðŸ‡¦',EC:'ðŸ‡ªðŸ‡¨'};const STATUS_COLORS={Procesando:'bg-yellow-50 text-yellow-700 border-yellow-200',Completado:'bg-green-50 text-green-700 border-green-200',Cancelada:'bg-red-50 text-red-700 border-red-200',Creando:'bg-gray-50 text-gray-700 border-gray-200','En pago':'bg-blue-50 text-blue-700 border-blue-200'};export default function TransactionsPage(){const[transactions,setTransactions]=useState([]);const[filtered,setFiltered]=useState([]);const[loading,setLoading]=useState(true);const[search,setSearch]=useState('');const[selected,setSelected]=useState(null);const[detailLoading,setDetailLoading]=useState(false);const[userInfo,setUserInfo]=useState(null);const[userLoading,setUserLoading]=useState(false);const[userPaymentMethods,setUserPaymentMethods]=useState([]);const[updating,setUpdating]=useState(false);const[page,setPage]=useState(1);const PAGE_SIZE=12;// ===========================\n// Utilidades\n// ===========================\nconst formatCurrency=function(value){let locale=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'es-CO';let currency=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'USD';if(value==null)return'-';try{return Number(value).toLocaleString(locale,{style:'currency',currency});}catch(_unused){return Number(value).toLocaleString();}};const getFlag=code=>{if(!code)return'ðŸŒ';const c=code.toUpperCase();return countryFlags[c]||'ðŸŒ';};// ===========================\n// Cargar transacciones\n// ===========================\nconst fetchTransactions=async()=>{console.log(\"ðŸ”µ [Admin/Transactions] fetchTransactions: iniciando\");setLoading(true);try{const{data,error}=await supabase.from('transactions').select('*').order('created_at',{ascending:false});if(error){console.error(\"âŒ [Admin/Transactions] fetchTransactions error:\",error);setTransactions([]);setFiltered([]);}else{console.log(\"ðŸŸ© [Admin/Transactions] transacciones cargadas:\",Array.isArray(data)?data.length:data);setTransactions(data||[]);setFiltered(data||[]);}}catch(err){console.error(\"ðŸ”¥ [Admin/Transactions] fetchTransactions catch:\",err);setTransactions([]);setFiltered([]);}finally{setLoading(false);}};useEffect(()=>{fetchTransactions();},[]);// ===========================\n// Realtime listener\n// ===========================\nuseEffect(()=>{const channel=supabase.channel('transactions_realtime').on('postgres_changes',{event:'*',schema:'public',table:'transactions'},payload=>{const evt=payload.type;if(evt==='INSERT'){setTransactions(prev=>[payload.new,...prev]);setFiltered(prev=>[payload.new,...prev]);}if(evt==='UPDATE'){setTransactions(prev=>prev.map(t=>t.id===payload.new.id?payload.new:t));setFiltered(prev=>prev.map(t=>t.id===payload.new.id?payload.new:t));}if(evt==='DELETE'){setTransactions(prev=>prev.filter(t=>t.id!==payload.old.id));setFiltered(prev=>prev.filter(t=>t.id!==payload.old.id));}}).subscribe();return()=>supabase.removeChannel(channel);},[]);// ===========================\n// BÃºsqueda\n// ===========================\nuseEffect(()=>{if(!search.trim()){setFiltered(transactions);setPage(1);return;}const q=search.toLowerCase();const result=transactions.filter(t=>{const matchesId=String(t.id).includes(q);const matchesStatus=String(t.status||'').toLowerCase().includes(q);const matchesOrigin=String(t.origin_country||'').toLowerCase().includes(q);const matchesDest=String(t.destination_country||'').toLowerCase().includes(q);const matchesAmount=String(t.amount||'').includes(q);const matchesRef=String(t.payment_reference||'').toLowerCase().includes(q)||String(t.admin_reference_number||'').toLowerCase().includes(q);return matchesId||matchesStatus||matchesOrigin||matchesDest||matchesAmount||matchesRef;});setFiltered(result);setPage(1);},[search,transactions]);// ===========================\n// Abrir detalles (cargar usuario y mÃ©todo de pago)\n// ===========================\nconst openDetails=async trx=>{console.log(\"ðŸ”µ openDetails() id=\",trx===null||trx===void 0?void 0:trx.id);setSelected(null);setDetailLoading(true);setUserInfo(null);setUserLoading(true);try{const{data:fresh,error:trxErr}=await supabase.from('transactions').select('*').eq('id',trx.id).single();if(trxErr||!fresh){console.error(\"âŒ openDetails: error cargando transacciÃ³n:\",trxErr);setSelected(null);setUserInfo(null);setUserLoading(false);setDetailLoading(false);return;}setSelected(fresh);if(fresh!==null&&fresh!==void 0&&fresh.user_id){try{const{data:usr,error:usrErr}=await supabase.from('users').select('id, first_name, last_name, phone, email, country, created_at, role').eq('id',fresh.user_id).single();if(usrErr||!usr){console.warn(\"âš  openDetails: usuario no encontrado o error:\",usrErr);setUserInfo(null);}else{setUserInfo(usr);}}catch(uErr){console.error(\"ðŸ”¥ openDetails fetch user catch:\",uErr);setUserInfo(null);}}else{setUserInfo(null);}const{data:pay,error:payErr}=await supabase.from('user_payment_methods').select('*').eq('id',fresh.payment_method_destination_id).single();setUserPaymentMethods(payErr?[]:[pay]);}catch(err){console.error(\"ðŸ”¥ openDetails catch:\",err);}finally{setDetailLoading(false);setUserLoading(false);}};// ===========================\n// Actualizar estado (con auditorÃ­a)\n// ===========================\nconst updateStatus=async function(id,newStatus){let adminRef=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;setUpdating(true);try{const updatedAt=new Date().toISOString();const updateData={status:newStatus,updated_at:updatedAt};if(adminRef!==null)updateData.destination_reference_number=adminRef;const{data,error}=await supabase.from('transactions').update(updateData).eq('id',id).select().single();if(error){alert(\"OcurriÃ³ un error al actualizar el estado. Revisa la consola.\");setUpdating(false);return;}try{await supabase.from('transactions_audit').insert({transaction_id:id,action:\"Estado cambiado a \\\"\".concat(newStatus,\"\\\"\"),admin:'admin_panel',created_at:new Date().toISOString()});}catch(auditErr){console.error(\"âŒ updateStatus auditorÃ­a error:\",auditErr);}setTransactions(prev=>prev.map(t=>t.id===id?data:t));setFiltered(prev=>prev.map(t=>t.id===id?data:t));setSelected(prev=>prev&&prev.id===id?data:prev);alert(\"\\u2714 Estado actualizado a \\\"\".concat(newStatus,\"\\\"\"));}catch(err){console.error(\"ðŸ”¥ updateStatus catch:\",err);}finally{setUpdating(false);}};// ===========================\n// PaginaciÃ³n\n// ===========================\nconst start=(page-1)*PAGE_SIZE;const pageItems=filtered.slice(start,start+PAGE_SIZE);const totalPages=Math.max(1,Math.ceil(filtered.length/PAGE_SIZE));return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold\",children:\"Transacciones\"}),/*#__PURE__*/_jsxs(\"button\",{className:\"flex items-center gap-2 bg-gray-100 px-3 py-2 rounded-lg hover:bg-gray-200\",onClick:()=>fetchTransactions(),children:[/*#__PURE__*/_jsx(RefreshCw,{className:\"w-4 h-4\"}),\" Refrescar\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-4 bg-white p-2 rounded-xl shadow\",children:[/*#__PURE__*/_jsx(Search,{className:\"w-5 h-5 text-gray-400\"}),/*#__PURE__*/_jsx(\"input\",{value:search,onChange:e=>setSearch(e.target.value),placeholder:\"Buscar por id, pa\\xEDs, estado, referencia...\",className:\"outline-none w-full\"})]}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center py-20\",children:/*#__PURE__*/_jsx(Loader2,{className:\"w-8 h-8 animate-spin text-blue-600\"})}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto bg-white shadow rounded-xl\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full text-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-100 text-gray-600\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"p-3 text-left\",children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-3 text-left\",children:\"Env\\xEDo\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-3 text-left\",children:\"Usuario\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-3 text-left\",children:\"Monto \\u2192 Recibe\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-3 text-left\",children:\"Fecha\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-3 text-left\",children:\"Estado\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-3 text-left\",children:\"Acciones\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:pageItems.map(t=>/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"p-3\",children:t.id}),/*#__PURE__*/_jsxs(\"td\",{className:\"p-3 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-2xl\",children:getFlag(t.origin_country)}),t.origin_country,/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-400\",children:\"\\u2192\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-2xl\",children:getFlag(t.destination_country)}),t.destination_country]}),/*#__PURE__*/_jsxs(\"td\",{className:\"p-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-semibold\",children:t.user_name||t.user_id}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:t.user_phone||'-'})]}),/*#__PURE__*/_jsxs(\"td\",{className:\"p-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-semibold\",children:[formatCurrency(t.amount,'es-CO',t.origin_currency),\" \\u2192\",' ',formatCurrency(t.received_amount,'es-CO',t.destination_currency)]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-600\",children:[\"Tasa: \",t.rate]})]}),/*#__PURE__*/_jsx(\"td\",{className:\"p-3 text-sm text-gray-600\",children:new Date(t.created_at).toLocaleString()}),/*#__PURE__*/_jsx(\"td\",{className:\"p-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"inline-flex items-center gap-2 px-3 py-1 rounded-full border \".concat(STATUS_COLORS[t.status]||'bg-gray-50 text-gray-700 border-gray-200'),children:[t.status==='Completado'?/*#__PURE__*/_jsx(CheckCircle,{className:\"w-4 h-4 text-green-500\"}):t.status==='Procesando'?/*#__PURE__*/_jsx(Loader2,{className:\"w-4 h-4 text-yellow-500 animate-spin\"}):/*#__PURE__*/_jsx(XCircle,{className:\"w-4 h-4 text-gray-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:t.status})]})}),/*#__PURE__*/_jsxs(\"td\",{className:\"p-3 flex flex-wrap gap-2\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"flex items-center gap-2 bg-blue-50 text-blue-700 px-3 py-2 rounded-lg\",onClick:()=>openDetails(t),children:[/*#__PURE__*/_jsx(Eye,{className:\"w-4 h-4\"}),\" Ver\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"flex items-center gap-2 bg-green-50 text-green-700 px-3 py-2 rounded-lg\",onClick:()=>updateStatus(t.id,'Procesando'),disabled:updating,children:[/*#__PURE__*/_jsx(CheckCircle,{className:\"w-4 h-4\"}),\" Procesando\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"flex items-center gap-2 bg-gray-50 text-gray-700 px-3 py-2 rounded-lg\",onClick:()=>{const phone=t.phone||null;if(phone)window.open(\"https://wa.me/\".concat(phone.replace(/\\D/g,'')));else alert('No hay telÃ©fono disponible');},children:[/*#__PURE__*/_jsx(MessageSquare,{className:\"w-4 h-4\"}),\" WhatsApp\"]})]})]},t.id))})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mt-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-600\",children:[filtered.length,\" resultados\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{disabled:page<=1,onClick:()=>setPage(p=>Math.max(1,p-1)),className:\"px-3 py-1 bg-gray-100 rounded\",children:\"Anterior\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"px-3 py-1 bg-white border rounded\",children:[page,\" / \",totalPages]}),/*#__PURE__*/_jsx(\"button\",{disabled:page>=totalPages,onClick:()=>setPage(p=>Math.min(totalPages,p+1)),className:\"px-3 py-1 bg-gray-100 rounded\",children:\"Siguiente\"})]})]})]}),selected&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 z-50 flex items-center justify-center p-6 bg-black/40 backdrop-blur-md\",onClick:()=>setSelected(null),children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-3xl shadow-2xl w-full max-w-3xl border border-gray-100\\r transform transition-all duration-300 scale-100 opacity-100 animate-fadeIn\\r max-h-[90vh] overflow-y-auto\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start p-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-white rounded-t-3xl\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-2xl font-extrabold text-gray-800 tracking-tight flex items-center gap-2\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"p-2 rounded-xl bg-blue-100 text-blue-700\",children:[\"#\",selected.id]}),\"Detalles de la Transacci\\xF3n\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mt-1\",children:new Date(selected.created_at).toLocaleString()})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelected(null),className:\"p-2 rounded-full hover:bg-gray-100 transition\",children:\"\\u2715\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6 p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 rounded-2xl shadow-inner bg-gradient-to-br from-gray-50 to-white border border-gray-200\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600\",children:\"Origen\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 font-semibold text-xl flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-3xl\",children:getFlag(selected.origin_country)}),selected.origin_country]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 space-y-2 text-gray-700\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Monto:\"}),\" \",formatCurrency(selected.amount,'es-CO',selected.origin_currency)]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Tasa:\"}),\" \",selected.rate]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Recibe:\"}),\" \",formatCurrency(selected.received_amount,'es-CO',selected.destination_currency)]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-5 bg-white rounded-2xl shadow-sm border border-gray-200\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-500\",children:\"Destino\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-1 font-semibold text-xl flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-3xl\",children:getFlag(selected.destination_country)}),selected.destination_country]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 space-y-1 text-gray-700\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Estado:\"}),\" \",selected.status]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Referencia Pago:\"}),\" \",selected.payment_reference||'-']}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm font-medium\",children:\"Ref. Admin:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:selected.destination_reference_number||'',onChange:e=>setSelected(prev=>_objectSpread(_objectSpread({},prev),{},{destination_reference_number:e.target.value})),className:\"mt-1 w-full px-3 py-2 border rounded-xl shadow-sm text-sm focus:ring-2 focus:ring-blue-600 outline-none\",placeholder:\"Ingrese referencia admin\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Moneda Origen:\"}),\" \",selected.origin_currency]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Moneda Destino:\"}),\" \",selected.destination_currency]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Notas:\"}),\" \",selected.notes||'-']})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 bg-gray-50 border rounded-2xl shadow-inner mt-4 mb-4 w-full\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-800 mb-3\",children:\"\\uD83D\\uDC64 Usuario\"}),userLoading?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 text-sm text-gray-600\",children:[/*#__PURE__*/_jsx(Loader2,{className:\"w-5 h-5 animate-spin text-blue-600\"}),\"Cargando informaci\\xF3n del usuario...\"]}):userInfo?/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm text-gray-700\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Nombre:\"}),\" \",userInfo.first_name,\" \",userInfo.last_name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Tel\\xE9fono:\"}),\" \",userInfo.phone]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),\" \",userInfo.email||'No registrado']}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Pa\\xEDs:\"}),\" \",userInfo.country]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Registrado:\"}),\" \",userInfo.created_at?new Date(userInfo.created_at).toLocaleString():'-']}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Rol:\"}),\" \",userInfo.role||'Usuario']})]}):/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:\"No se encontr\\xF3 informaci\\xF3n del usuario.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-8 p-5 bg-gradient-to-br from-blue-50 to-blue-100 rounded-3xl shadow-inner border border-blue-200\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-bold text-blue-900 mb-4\",children:\"M\\xE9todo de pago de la transacci\\xF3n\"}),detailLoading?/*#__PURE__*/_jsx(\"div\",{className:\"py-6 text-center\",children:/*#__PURE__*/_jsx(Loader2,{className:\"w-8 h-8 animate-spin text-blue-600\"})}):userPaymentMethods.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"p-4 text-gray-600\",children:\"No se encontr\\xF3 el m\\xE9todo de pago.\"}):/*#__PURE__*/_jsx(\"div\",{className:\"p-4 bg-white rounded-2xl border border-blue-100 shadow space-y-4\",children:(()=>{const trxMethod=userPaymentMethods[0];return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"font-semibold text-blue-800 text-lg\",children:[trxMethod.method,\" \\u2014 \",trxMethod.country_code]}),trxMethod.instructions&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[\"Instrucciones: \",trxMethod.instructions]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500\",children:new Date(trxMethod.created_at).toLocaleString()})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-3 pt-2\",children:trxMethod.data&&Object.entries(trxMethod.data).filter(_ref=>{let[_,v]=_ref;return v;}).map(_ref2=>{let[k,v]=_ref2;let label=k;if(k.toLowerCase().includes('phone'))label='NÃºmero de Cuenta';else if(k.toLowerCase().includes('titular'))label='Titular';else if(k.toLowerCase().includes('instructions'))label='Instrucciones';return/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-700\",children:[/*#__PURE__*/_jsxs(\"strong\",{children:[label,\":\"]}),\" \",v]},k);})})]});})()})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end gap-3 mt-8\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelected(null),className:\"px-5 py-2.5 bg-gray-200 hover:bg-gray-300 rounded-xl transition\",children:\"Cerrar\"}),/*#__PURE__*/_jsx(\"button\",{className:\"px-5 py-2.5 bg-green-600 hover:bg-green-700 text-white rounded-xl transition\",onClick:()=>{updateStatus(selected.id,'Completado',selected.destination_reference_number);setSelected(null);},disabled:updating,children:\"Marcar Completado\"}),/*#__PURE__*/_jsx(\"button\",{className:\"px-5 py-2.5 bg-red-600 hover:bg-red-700 text-white rounded-xl transition\",onClick:()=>{updateStatus(selected.id,'Cancelada',selected.destination_reference_number);setSelected(null);},disabled:updating,children:\"Marcar Cancelada\"})]})]})]})})]});}","map":{"version":3,"names":["React","useEffect","useState","Search","Loader2","Eye","CheckCircle","XCircle","MessageSquare","RefreshCw","supabase","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","countryFlags","CO","VE","US","PE","PA","EC","STATUS_COLORS","Procesando","Completado","Cancelada","Creando","TransactionsPage","transactions","setTransactions","filtered","setFiltered","loading","setLoading","search","setSearch","selected","setSelected","detailLoading","setDetailLoading","userInfo","setUserInfo","userLoading","setUserLoading","userPaymentMethods","setUserPaymentMethods","updating","setUpdating","page","setPage","PAGE_SIZE","formatCurrency","value","locale","arguments","length","undefined","currency","Number","toLocaleString","style","_unused","getFlag","code","c","toUpperCase","fetchTransactions","console","log","data","error","from","select","order","ascending","Array","isArray","err","channel","on","event","schema","table","payload","evt","type","prev","new","map","t","id","filter","old","subscribe","removeChannel","trim","q","toLowerCase","result","matchesId","String","includes","matchesStatus","status","matchesOrigin","origin_country","matchesDest","destination_country","matchesAmount","amount","matchesRef","payment_reference","admin_reference_number","openDetails","trx","fresh","trxErr","eq","single","user_id","usr","usrErr","warn","uErr","pay","payErr","payment_method_destination_id","updateStatus","newStatus","adminRef","updatedAt","Date","toISOString","updateData","updated_at","destination_reference_number","update","alert","insert","transaction_id","action","concat","admin","created_at","auditErr","start","pageItems","slice","totalPages","Math","max","ceil","children","className","onClick","onChange","e","target","placeholder","user_name","user_phone","origin_currency","received_amount","destination_currency","rate","disabled","phone","window","open","replace","p","min","stopPropagation","_objectSpread","notes","first_name","last_name","email","country","role","trxMethod","method","country_code","instructions","Object","entries","_ref","_","v","_ref2","k","label"],"sources":["C:/Users/Usuario/Desktop/intento de app/src/pages/admin/Transactions.js"],"sourcesContent":["// src/pages/admin/Transactions.js\r\nimport React, { useEffect, useState } from 'react';\r\nimport {\r\n  Search,\r\n  Loader2,\r\n  Eye,\r\n  CheckCircle,\r\n  XCircle,\r\n  MessageSquare,\r\n  RefreshCw\r\n} from 'lucide-react';\r\nimport { supabase } from '../../supabaseClient';\r\n\r\n/* eslint-disable react-hooks/exhaustive-deps */\r\n\r\n// Mapa simple de banderas por cÃ³digo\r\nconst countryFlags = {\r\n  CO: 'ðŸ‡¨ðŸ‡´',\r\n  VE: 'ðŸ‡»ðŸ‡ª',\r\n  US: 'ðŸ‡ºðŸ‡¸',\r\n  PE: 'ðŸ‡µðŸ‡ª',\r\n  PA: 'ðŸ‡µðŸ‡¦',\r\n  EC: 'ðŸ‡ªðŸ‡¨'\r\n};\r\n\r\nconst STATUS_COLORS = {\r\n  Procesando: 'bg-yellow-50 text-yellow-700 border-yellow-200',\r\n  Completado: 'bg-green-50 text-green-700 border-green-200',\r\n  Cancelada: 'bg-red-50 text-red-700 border-red-200',\r\n  Creando: 'bg-gray-50 text-gray-700 border-gray-200',\r\n  'En pago': 'bg-blue-50 text-blue-700 border-blue-200'\r\n};\r\n\r\nexport default function TransactionsPage() {\r\n  const [transactions, setTransactions] = useState([]);\r\n  const [filtered, setFiltered] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [search, setSearch] = useState('');\r\n  const [selected, setSelected] = useState(null);\r\n  const [detailLoading, setDetailLoading] = useState(false);\r\n  const [userInfo, setUserInfo] = useState(null);\r\n  const [userLoading, setUserLoading] = useState(false);\r\n  const [userPaymentMethods, setUserPaymentMethods] = useState([]);\r\n  const [updating, setUpdating] = useState(false);\r\n  const [page, setPage] = useState(1);\r\n  const PAGE_SIZE = 12;\r\n\r\n  // ===========================\r\n  // Utilidades\r\n  // ===========================\r\n  const formatCurrency = (value, locale = 'es-CO', currency = 'USD') => {\r\n    if (value == null) return '-';\r\n    try {\r\n      return Number(value).toLocaleString(locale, { style: 'currency', currency });\r\n    } catch {\r\n      return Number(value).toLocaleString();\r\n    }\r\n  };\r\n\r\n  const getFlag = (code) => {\r\n    if (!code) return 'ðŸŒ';\r\n    const c = code.toUpperCase();\r\n    return countryFlags[c] || 'ðŸŒ';\r\n  };\r\n\r\n  // ===========================\r\n  // Cargar transacciones\r\n  // ===========================\r\n  const fetchTransactions = async () => {\r\n    console.log(\"ðŸ”µ [Admin/Transactions] fetchTransactions: iniciando\");\r\n    setLoading(true);\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('transactions')\r\n        .select('*')\r\n        .order('created_at', { ascending: false });\r\n\r\n      if (error) {\r\n        console.error(\"âŒ [Admin/Transactions] fetchTransactions error:\", error);\r\n        setTransactions([]);\r\n        setFiltered([]);\r\n      } else {\r\n        console.log(\"ðŸŸ© [Admin/Transactions] transacciones cargadas:\", Array.isArray(data) ? data.length : data);\r\n        setTransactions(data || []);\r\n        setFiltered(data || []);\r\n      }\r\n    } catch (err) {\r\n      console.error(\"ðŸ”¥ [Admin/Transactions] fetchTransactions catch:\", err);\r\n      setTransactions([]);\r\n      setFiltered([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchTransactions();\r\n  }, []);\r\n\r\n\r\n// ===========================\r\n  // Realtime listener\r\n  // ===========================\r\n  useEffect(() => {\r\n    const channel = supabase\r\n      .channel('transactions_realtime')\r\n      .on(\r\n        'postgres_changes',\r\n        { event: '*', schema: 'public', table: 'transactions' },\r\n        (payload) => {\r\n          const evt = payload.type;\r\n\r\n          if (evt === 'INSERT') {\r\n            setTransactions(prev => [payload.new, ...prev]);\r\n            setFiltered(prev => [payload.new, ...prev]);\r\n          }\r\n\r\n          if (evt === 'UPDATE') {\r\n            setTransactions(prev =>\r\n              prev.map(t => (t.id === payload.new.id ? payload.new : t))\r\n            );\r\n            setFiltered(prev =>\r\n              prev.map(t => (t.id === payload.new.id ? payload.new : t))\r\n            );\r\n          }\r\n\r\n          if (evt === 'DELETE') {\r\n            setTransactions(prev => prev.filter(t => t.id !== payload.old.id));\r\n            setFiltered(prev => prev.filter(t => t.id !== payload.old.id));\r\n          }\r\n        }\r\n      )\r\n      .subscribe();\r\n\r\n    return () => supabase.removeChannel(channel);\r\n  }, []);\r\n\r\n  // ===========================\r\n  // BÃºsqueda\r\n  // ===========================\r\n  useEffect(() => {\r\n    if (!search.trim()) {\r\n      setFiltered(transactions);\r\n      setPage(1);\r\n      return;\r\n    }\r\n\r\n    const q = search.toLowerCase();\r\n    const result = transactions.filter(t => {\r\n      const matchesId = String(t.id).includes(q);\r\n      const matchesStatus = String(t.status || '').toLowerCase().includes(q);\r\n      const matchesOrigin = String(t.origin_country || '').toLowerCase().includes(q);\r\n      const matchesDest = String(t.destination_country || '').toLowerCase().includes(q);\r\n      const matchesAmount = String(t.amount || '').includes(q);\r\n      const matchesRef =\r\n        String(t.payment_reference || '').toLowerCase().includes(q) ||\r\n        String(t.admin_reference_number || '').toLowerCase().includes(q);\r\n\r\n      return (\r\n        matchesId ||\r\n        matchesStatus ||\r\n        matchesOrigin ||\r\n        matchesDest ||\r\n        matchesAmount ||\r\n        matchesRef\r\n      );\r\n    });\r\n\r\n    setFiltered(result);\r\n    setPage(1);\r\n  }, [search, transactions]);\r\n\r\n\r\n// ===========================\r\n  // Abrir detalles (cargar usuario y mÃ©todo de pago)\r\n  // ===========================\r\n  const openDetails = async (trx) => {\r\n    console.log(\"ðŸ”µ openDetails() id=\", trx?.id);\r\n    setSelected(null);\r\n    setDetailLoading(true);\r\n    setUserInfo(null);\r\n    setUserLoading(true);\r\n\r\n    try {\r\n      const { data: fresh, error: trxErr } = await supabase\r\n        .from('transactions')\r\n        .select('*')\r\n        .eq('id', trx.id)\r\n        .single();\r\n\r\n      if (trxErr || !fresh) {\r\n        console.error(\"âŒ openDetails: error cargando transacciÃ³n:\", trxErr);\r\n        setSelected(null);\r\n        setUserInfo(null);\r\n        setUserLoading(false);\r\n        setDetailLoading(false);\r\n        return;\r\n      }\r\n\r\n      setSelected(fresh);\r\n\r\n      if (fresh?.user_id) {\r\n        try {\r\n          const { data: usr, error: usrErr } = await supabase\r\n            .from('users')\r\n            .select('id, first_name, last_name, phone, email, country, created_at, role')\r\n            .eq('id', fresh.user_id)\r\n            .single();\r\n\r\n          if (usrErr || !usr) {\r\n            console.warn(\"âš  openDetails: usuario no encontrado o error:\", usrErr);\r\n            setUserInfo(null);\r\n          } else {\r\n            setUserInfo(usr);\r\n          }\r\n        } catch (uErr) {\r\n          console.error(\"ðŸ”¥ openDetails fetch user catch:\", uErr);\r\n          setUserInfo(null);\r\n        }\r\n      } else {\r\n        setUserInfo(null);\r\n      }\r\n\r\n      const { data: pay, error: payErr } = await supabase\r\n        .from('user_payment_methods')\r\n        .select('*')\r\n        .eq('id', fresh.payment_method_destination_id)\r\n        .single();\r\n\r\n      setUserPaymentMethods(payErr ? [] : [pay]);\r\n\r\n    } catch (err) {\r\n      console.error(\"ðŸ”¥ openDetails catch:\", err);\r\n    } finally {\r\n      setDetailLoading(false);\r\n      setUserLoading(false);\r\n    }\r\n  };\r\n\r\n\r\n// ===========================\r\n  // Actualizar estado (con auditorÃ­a)\r\n  // ===========================\r\n  const updateStatus = async (id, newStatus, adminRef = null) => {\r\n  setUpdating(true);\r\n  try {\r\n    const updatedAt = new Date().toISOString();\r\n\r\n    const updateData = {\r\n      status: newStatus,\r\n      updated_at: updatedAt,\r\n    };\r\n\r\n    if (adminRef !== null) updateData.destination_reference_number = adminRef;\r\n\r\n    const { data, error } = await supabase\r\n      .from('transactions')\r\n      .update(updateData)\r\n      .eq('id', id)\r\n      .select()\r\n      .single();\r\n\r\n      if (error) {\r\n        alert(\"OcurriÃ³ un error al actualizar el estado. Revisa la consola.\");\r\n        setUpdating(false);\r\n        return;\r\n      }\r\n\r\n      try {\r\n        await supabase\r\n          .from('transactions_audit')\r\n          .insert({\r\n            transaction_id: id,\r\n            action: `Estado cambiado a \"${newStatus}\"`,\r\n            admin: 'admin_panel',\r\n            created_at: new Date().toISOString(),\r\n          });\r\n      } catch (auditErr) {\r\n        console.error(\"âŒ updateStatus auditorÃ­a error:\", auditErr);\r\n      }\r\n\r\n      setTransactions(prev => prev.map(t => (t.id === id ? data : t)));\r\n      setFiltered(prev => prev.map(t => (t.id === id ? data : t)));\r\n      setSelected(prev => (prev && prev.id === id ? data : prev));\r\n\r\n      alert(`âœ” Estado actualizado a \"${newStatus}\"`);\r\n    } catch (err) {\r\n      console.error(\"ðŸ”¥ updateStatus catch:\", err);\r\n    } finally {\r\n      setUpdating(false);\r\n    }\r\n  };\r\n\r\n  // ===========================\r\n  // PaginaciÃ³n\r\n  // ===========================\r\n  const start = (page - 1) * PAGE_SIZE;\r\n  const pageItems = filtered.slice(start, start + PAGE_SIZE);\r\n  const totalPages = Math.max(1, Math.ceil(filtered.length / PAGE_SIZE));\r\n\r\n\r\nreturn (\r\n    <div>\r\n      {/* HEADER */}\r\n      <div className=\"flex items-center justify-between mb-4\">\r\n        <h1 className=\"text-2xl font-bold\">Transacciones</h1>\r\n        <button\r\n          className=\"flex items-center gap-2 bg-gray-100 px-3 py-2 rounded-lg hover:bg-gray-200\"\r\n          onClick={() => fetchTransactions()}\r\n        >\r\n          <RefreshCw className=\"w-4 h-4\" /> Refrescar\r\n        </button>\r\n      </div>\r\n\r\n      {/* BUSCADOR */}\r\n      <div className=\"flex items-center gap-2 mb-4 bg-white p-2 rounded-xl shadow\">\r\n        <Search className=\"w-5 h-5 text-gray-400\" />\r\n        <input\r\n          value={search}\r\n          onChange={(e) => setSearch(e.target.value)}\r\n          placeholder=\"Buscar por id, paÃ­s, estado, referencia...\"\r\n          className=\"outline-none w-full\"\r\n        />\r\n      </div>\r\n\r\n      {/* TABLA */}\r\n      {loading ? (\r\n        <div className=\"flex justify-center py-20\">\r\n          <Loader2 className=\"w-8 h-8 animate-spin text-blue-600\" />\r\n        </div>\r\n      ) : (\r\n        <>\r\n          <div className=\"overflow-x-auto bg-white shadow rounded-xl\">\r\n            <table className=\"w-full text-sm\">\r\n              <thead className=\"bg-gray-100 text-gray-600\">\r\n                <tr>\r\n                  <th className=\"p-3 text-left\">#</th>\r\n                  <th className=\"p-3 text-left\">EnvÃ­o</th>\r\n                  <th className=\"p-3 text-left\">Usuario</th>\r\n                  <th className=\"p-3 text-left\">Monto â†’ Recibe</th>\r\n                  <th className=\"p-3 text-left\">Fecha</th>\r\n                  <th className=\"p-3 text-left\">Estado</th>\r\n                  <th className=\"p-3 text-left\">Acciones</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {pageItems.map((t) => (\r\n                  <tr key={t.id} className=\"border-b hover:bg-gray-50\">\r\n                    <td className=\"p-3\">{t.id}</td>\r\n                    <td className=\"p-3 flex items-center gap-2\">\r\n                      <span className=\"text-2xl\">{getFlag(t.origin_country)}</span>\r\n                      {t.origin_country}\r\n                      <span className=\"text-gray-400\">â†’</span>\r\n                      <span className=\"text-2xl\">{getFlag(t.destination_country)}</span>\r\n                      {t.destination_country}\r\n                    </td>\r\n                    <td className=\"p-3\">\r\n                      <div className=\"font-semibold\">{t.user_name || t.user_id}</div>\r\n                      <div className=\"text-sm text-gray-600\">{t.user_phone || '-'}</div>\r\n                    </td>\r\n                    <td className=\"p-3\">\r\n                      <div className=\"font-semibold\">\r\n                        {formatCurrency(t.amount, 'es-CO', t.origin_currency)} â†’{' '}\r\n                        {formatCurrency(t.received_amount, 'es-CO', t.destination_currency)}\r\n                      </div>\r\n                      <div className=\"text-sm text-gray-600\">Tasa: {t.rate}</div>\r\n                    </td>\r\n                    <td className=\"p-3 text-sm text-gray-600\">{new Date(t.created_at).toLocaleString()}</td>\r\n                    <td className=\"p-3\">\r\n                      <div className={`inline-flex items-center gap-2 px-3 py-1 rounded-full border ${STATUS_COLORS[t.status] || 'bg-gray-50 text-gray-700 border-gray-200'}`}>\r\n                        {t.status === 'Completado' ? (\r\n                          <CheckCircle className=\"w-4 h-4 text-green-500\" />\r\n                        ) : t.status === 'Procesando' ? (\r\n                          <Loader2 className=\"w-4 h-4 text-yellow-500 animate-spin\" />\r\n                        ) : (\r\n                          <XCircle className=\"w-4 h-4 text-gray-500\" />\r\n                        )}\r\n                        <span className=\"text-sm\">{t.status}</span>\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"p-3 flex flex-wrap gap-2\">\r\n                      <button className=\"flex items-center gap-2 bg-blue-50 text-blue-700 px-3 py-2 rounded-lg\" onClick={() => openDetails(t)}>\r\n                        <Eye className=\"w-4 h-4\" /> Ver\r\n                      </button>\r\n                      <button className=\"flex items-center gap-2 bg-green-50 text-green-700 px-3 py-2 rounded-lg\" onClick={() => updateStatus(t.id, 'Procesando')} disabled={updating}>\r\n                        <CheckCircle className=\"w-4 h-4\" /> Procesando\r\n                      </button>\r\n                      <button className=\"flex items-center gap-2 bg-gray-50 text-gray-700 px-3 py-2 rounded-lg\" onClick={() => {\r\n                        const phone = t.phone || null;\r\n                        if (phone) window.open(`https://wa.me/${phone.replace(/\\D/g, '')}`);\r\n                        else alert('No hay telÃ©fono disponible');\r\n                      }}>\r\n                        <MessageSquare className=\"w-4 h-4\" /> WhatsApp\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n\r\n          {/* PAGINACIÃ“N */}\r\n          <div className=\"flex items-center justify-between mt-4\">\r\n            <div className=\"text-sm text-gray-600\">{filtered.length} resultados</div>\r\n            <div className=\"flex items-center gap-2\">\r\n              <button disabled={page <= 1} onClick={() => setPage(p => Math.max(1, p - 1))} className=\"px-3 py-1 bg-gray-100 rounded\">Anterior</button>\r\n              <div className=\"px-3 py-1 bg-white border rounded\">{page} / {totalPages}</div>\r\n              <button disabled={page >= totalPages} onClick={() => setPage(p => Math.min(totalPages, p + 1))} className=\"px-3 py-1 bg-gray-100 rounded\">Siguiente</button>\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n\r\n\r\n{/* MODAL DETALLES */}\r\n      {selected && (\r\n        <div\r\n          className=\"fixed inset-0 z-50 flex items-center justify-center p-6 bg-black/40 backdrop-blur-md\"\r\n          onClick={() => setSelected(null)}\r\n        >\r\n          <div\r\n            className=\"bg-white rounded-3xl shadow-2xl w-full max-w-3xl border border-gray-100\r\n                       transform transition-all duration-300 scale-100 opacity-100 animate-fadeIn\r\n                       max-h-[90vh] overflow-y-auto\"\r\n            onClick={(e) => e.stopPropagation()}\r\n          >\r\n            {/* ENCABEZADO */}\r\n            <div className=\"flex justify-between items-start p-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-white rounded-t-3xl\">\r\n              <div>\r\n                <h2 className=\"text-2xl font-extrabold text-gray-800 tracking-tight flex items-center gap-2\">\r\n                  <span className=\"p-2 rounded-xl bg-blue-100 text-blue-700\">#{selected.id}</span>\r\n                  Detalles de la TransacciÃ³n\r\n                </h2>\r\n                <p className=\"text-sm text-gray-500 mt-1\">{new Date(selected.created_at).toLocaleString()}</p>\r\n              </div>\r\n\r\n              <button\r\n                onClick={() => setSelected(null)}\r\n                className=\"p-2 rounded-full hover:bg-gray-100 transition\"\r\n              >\r\n                âœ•\r\n              </button>\r\n            </div>\r\n\r\n            {/* GRID PRINCIPAL */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 p-6\">\r\n\r\n              {/* ORIGEN */}\r\n              <div className=\"p-6 rounded-2xl shadow-inner bg-gradient-to-br from-gray-50 to-white border border-gray-200\">\r\n                <p className=\"text-sm font-medium text-gray-600\">Origen</p>\r\n                <div className=\"mt-2 font-semibold text-xl flex items-center gap-2\">\r\n                  <span className=\"text-3xl\">{getFlag(selected.origin_country)}</span>\r\n                  {selected.origin_country}\r\n                </div>\r\n                <div className=\"mt-4 space-y-2 text-gray-700\">\r\n                  <p><strong>Monto:</strong> {formatCurrency(selected.amount, 'es-CO', selected.origin_currency)}</p>\r\n                  <p><strong>Tasa:</strong> {selected.rate}</p>\r\n                  <p><strong>Recibe:</strong> {formatCurrency(selected.received_amount, 'es-CO', selected.destination_currency)}</p>\r\n                </div>\r\n              </div>\r\n\r\n              {/* DESTINO */}\r\n              <div className=\"p-5 bg-white rounded-2xl shadow-sm border border-gray-200\">\r\n                <p className=\"text-sm font-medium text-gray-500\">Destino</p>\r\n                <div className=\"mt-1 font-semibold text-xl flex items-center gap-2\">\r\n                  <span className=\"text-3xl\">{getFlag(selected.destination_country)}</span>\r\n                  {selected.destination_country}\r\n                </div>\r\n                <div className=\"mt-4 space-y-1 text-gray-700\">\r\n                  <p><strong>Estado:</strong> {selected.status}</p>\r\n                  <p><strong>Referencia Pago:</strong> {selected.payment_reference || '-'}</p>\r\n                  <div className=\"mt-2\">\r\n                    <label className=\"text-sm font-medium\">Ref. Admin:</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={selected.destination_reference_number || ''}\r\n                      onChange={(e) =>\r\n                        setSelected((prev) => ({\r\n                          ...prev,\r\n                          destination_reference_number: e.target.value,\r\n                        }))\r\n                      }\r\n                      className=\"mt-1 w-full px-3 py-2 border rounded-xl shadow-sm text-sm focus:ring-2 focus:ring-blue-600 outline-none\"\r\n                      placeholder=\"Ingrese referencia admin\"\r\n                    />\r\n                  </div>\r\n                  <p><strong>Moneda Origen:</strong> {selected.origin_currency}</p>\r\n                  <p><strong>Moneda Destino:</strong> {selected.destination_currency}</p>\r\n                  <p><strong>Notas:</strong> {selected.notes || '-'}</p>\r\n                </div>\r\n              </div>\r\n\r\n              {/* USUARIO */}\r\n              <div className=\"p-6 bg-gray-50 border rounded-2xl shadow-inner mt-4 mb-4 w-full\">\r\n                <h3 className=\"text-xl font-bold text-gray-800 mb-3\">ðŸ‘¤ Usuario</h3>\r\n                {userLoading ? (\r\n                  <div className=\"flex items-center gap-3 text-sm text-gray-600\">\r\n                    <Loader2 className=\"w-5 h-5 animate-spin text-blue-600\" />\r\n                    Cargando informaciÃ³n del usuario...\r\n                  </div>\r\n                ) : userInfo ? (\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm text-gray-700\">\r\n                    <p><strong>Nombre:</strong> {userInfo.first_name} {userInfo.last_name}</p>\r\n                    <p><strong>TelÃ©fono:</strong> {userInfo.phone}</p>\r\n                    <p><strong>Email:</strong> {userInfo.email || 'No registrado'}</p>\r\n                    <p><strong>PaÃ­s:</strong> {userInfo.country}</p>\r\n                    <p><strong>Registrado:</strong> {userInfo.created_at ? new Date(userInfo.created_at).toLocaleString() : '-'}</p>\r\n                    <p><strong>Rol:</strong> {userInfo.role || 'Usuario'}</p>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"text-sm text-gray-600\">No se encontrÃ³ informaciÃ³n del usuario.</div>\r\n                )}\r\n              </div>\r\n\r\n              {/* MÃ‰TODO DE PAGO */}\r\n              <div className=\"mt-8 p-5 bg-gradient-to-br from-blue-50 to-blue-100 rounded-3xl shadow-inner border border-blue-200\">\r\n                <h3 className=\"text-lg font-bold text-blue-900 mb-4\">MÃ©todo de pago de la transacciÃ³n</h3>\r\n                {detailLoading ? (\r\n                  <div className=\"py-6 text-center\">\r\n                    <Loader2 className=\"w-8 h-8 animate-spin text-blue-600\" />\r\n                  </div>\r\n                ) : userPaymentMethods.length === 0 ? (\r\n                  <div className=\"p-4 text-gray-600\">No se encontrÃ³ el mÃ©todo de pago.</div>\r\n                ) : (\r\n                  <div className=\"p-4 bg-white rounded-2xl border border-blue-100 shadow space-y-4\">\r\n                    {(() => {\r\n                      const trxMethod = userPaymentMethods[0];\r\n                      return (\r\n                        <>\r\n                          <div className=\"flex justify-between items-center\">\r\n                            <div>\r\n                              <p className=\"font-semibold text-blue-800 text-lg\">{trxMethod.method} â€” {trxMethod.country_code}</p>\r\n                              {trxMethod.instructions && (\r\n                                <p className=\"text-sm text-gray-600\">Instrucciones: {trxMethod.instructions}</p>\r\n                              )}\r\n                            </div>\r\n                            <div className=\"text-xs text-gray-500\">{new Date(trxMethod.created_at).toLocaleString()}</div>\r\n                          </div>\r\n                          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3 pt-2\">\r\n                            {trxMethod.data &&\r\n                              Object.entries(trxMethod.data)\r\n                                .filter(([_, v]) => v)\r\n                                .map(([k, v]) => {\r\n                                  let label = k;\r\n                                  if (k.toLowerCase().includes('phone')) label = 'NÃºmero de Cuenta';\r\n                                  else if (k.toLowerCase().includes('titular')) label = 'Titular';\r\n                                  else if (k.toLowerCase().includes('instructions')) label = 'Instrucciones';\r\n                                  return <p key={k} className=\"text-gray-700\"><strong>{label}:</strong> {v}</p>;\r\n                                })}\r\n                          </div>\r\n                        </>\r\n                      );\r\n                    })()}\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/* BOTONES */}\r\n              <div className=\"flex justify-end gap-3 mt-8\">\r\n                <button onClick={() => setSelected(null)} className=\"px-5 py-2.5 bg-gray-200 hover:bg-gray-300 rounded-xl transition\">Cerrar</button>\r\n               <button\r\n  className=\"px-5 py-2.5 bg-green-600 hover:bg-green-700 text-white rounded-xl transition\"\r\n  onClick={() => {\r\n    updateStatus(selected.id, 'Completado', selected.destination_reference_number);\r\n    setSelected(null);\r\n  }}\r\n  disabled={updating}\r\n>\r\n  Marcar Completado\r\n</button>\r\n\r\n<button\r\n  className=\"px-5 py-2.5 bg-red-600 hover:bg-red-700 text-white rounded-xl transition\"\r\n  onClick={() => {\r\n    updateStatus(selected.id, 'Cancelada', selected.destination_reference_number);\r\n    setSelected(null);\r\n  }}\r\n  disabled={updating}\r\n>\r\n  Marcar Cancelada\r\n</button>\r\n\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}