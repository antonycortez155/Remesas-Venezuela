{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{countries}from\"../../data/countries\";import{motion}from\"framer-motion\";import{useNavigate}from\"react-router-dom\";import{useApp}from\"../../context/AppContext\";import{supabase}from\"../../supabaseClient\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function SelectCountries(){console.log(\"üìå Componente SelectCountries MONTADO\");const navigate=useNavigate();const{user}=useApp();const[origin,setOrigin]=useState(\"\");const[destination,setDestination]=useState(\"\");const[amount,setAmount]=useState(\"\");const[formattedAmount,setFormattedAmount]=useState(\"\");const[rate,setRate]=useState(null);const[operation,setOperation]=useState(null);const[currency,setCurrency]=useState(null);// üëà moneda real desde DB\nconst[receivedAmount,setReceivedAmount]=useState(null);const[loading,setLoading]=useState(false);const[dbRates,setDbRates]=useState([]);// ============================\n// üî• 1. Cargar tasas desde Supabase\n// ============================\nuseEffect(()=>{console.log(\"üìå useEffect ‚Üí Cargando tasas de Supabase‚Ä¶\");const loadRates=async()=>{const{data,error}=await supabase.from(\"rates\").select(\"*\");console.log(\"üì• Respuesta Supabase (rates):\",data);console.log(\"‚ùå Error Supabase:\",error);if(error)return;setDbRates(data);};loadRates();},[]);// ============================\n// üî• 2. Formateo del monto\n// ============================\nconst handleAmountChange=value=>{console.log(\"‚å®Ô∏è Monto escrito:\",value);const raw=value.replace(/\\D/g,\"\");console.log(\"‚û°Ô∏è Monto sin formato:\",raw);setAmount(raw);if(!raw){console.log(\"‚ö†Ô∏è Monto vac√≠o ‚Üí limpiando\");setFormattedAmount(\"\");setReceivedAmount(null);return;}const formatted=new Intl.NumberFormat(\"de-DE\").format(raw);console.log(\"üßÆ Monto formateado:\",formatted);setFormattedAmount(formatted);};// ============================\n// üî• 3. C√°lculo con tasas\n// ============================\nuseEffect(()=>{console.log(\"üîÑ useEffect CALCULATING...\");console.log(\"üåç Origen:\",origin);console.log(\"üéØ Destino:\",destination);console.log(\"üíµ Amount:\",amount);console.log(\"üìä dbRates:\",dbRates);if(!origin||!destination||!amount||dbRates.length===0){console.log(\"‚ö†Ô∏è Datos insuficientes para calcular\");setRate(null);setReceivedAmount(null);return;}const match=dbRates.find(r=>r.origin_country===origin&&r.destination_country===destination);console.log(\"üîç Resultado b√∫squeda tasa:\",match);if(!match){console.log(\"‚ùå NO SE ENCONTR√ì TASA PARA:\",origin,\"‚Üí\",destination);setRate(null);setReceivedAmount(null);return;}setRate(match.rate);setOperation(match.operation);setCurrency(match.currency);// üëà CARGAMOS moneda de la tabla\nlet calculated=0;console.log(\"üßÆ Operaci√≥n:\",match.operation);console.log(\"üìà Rate:\",match.rate);if(match.operation===\"multiply\"){calculated=parseFloat(amount)*match.rate;console.log(\"‚úñÔ∏è Multiplicando:\",amount,\"*\",match.rate,\"=\",calculated);}else{calculated=parseFloat(amount)/match.rate;console.log(\"‚ûó Dividiendo:\",amount,\"/\",match.rate,\"=\",calculated);}console.log(\"üí∞ Resultado redondeado:\",Math.round(calculated));setReceivedAmount(Math.round(calculated));},[origin,destination,amount,dbRates]);const originCountry=countries.find(c=>c.code===origin)||{flag:\"üåç\",name:\"\"};const destinationCountry=countries.find(c=>c.code===destination)||{flag:\"üåç\",name:\"\"};const canContinue=origin&&destination&&amount&&receivedAmount;// ============================\n// üî• 4. Crear transacci√≥n en Supabase\n// ============================\nconst goNext=async()=>{console.log(\"‚û°Ô∏è goNext PRESSED\");console.log(\"üßæ Datos enviados:\",{origin,destination,amount:parseFloat(amount),rate,operation,currency,received_amount:receivedAmount});if(!user){console.log(\"‚ùå No hay user en contexto\");return;}setLoading(true);try{const{data,error}=await supabase.from(\"transactions\").insert([{user_id:user.id,origin_country:origin,destination_country:destination,amount:parseFloat(amount),rate,operation,currency,received_amount:receivedAmount,status:\"Creando\",created_at:new Date().toISOString()}]).select().single();console.log(\"üì• Respuesta INSERT:\",data);console.log(\"‚ùå Error INSERT:\",error);if(error)throw error;navigate(\"/send/step2\",{state:{origin,destination,amount:parseFloat(amount),rate,receivedAmount,operation,currency,// üëà moneda desde DB\ntransactionId:data.id}});}catch(err){console.log(\"üî• Error creando transacci√≥n:\",err);alert(\"Ocurri√≥ un error al crear la transacci√≥n.\");}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"h-screen w-full overflow-auto scroll-pb-40 p-5 bg-gradient-to-b from-blue-50 to-yellow-50\",children:[/*#__PURE__*/_jsx(motion.h1,{initial:{opacity:0,y:-15},animate:{opacity:1,y:0},className:\"text-xl font-bold text-blue-900 mb-6 text-center\",children:\"Selecciona los datos del env\\xEDo\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"font-semibold text-blue-900\",children:\"Pa\\xEDs de env\\xEDo\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"w-full p-3 rounded-xl border\",value:origin,onChange:e=>{console.log(\"üá¶üá∫ Cambio pa√≠s origen ‚Üí\",e.target.value);setOrigin(e.target.value);setDestination(\"\");},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Selecciona un pa\\xEDs\"}),countries.map(c=>/*#__PURE__*/_jsxs(\"option\",{value:c.code,children:[c.flag,\" \",c.name]},c.code))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"font-semibold text-blue-900\",children:\"Pa\\xEDs destino\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"w-full p-3 rounded-xl border\",value:destination,onChange:e=>{console.log(\"üéØ Cambio pa√≠s destino ‚Üí\",e.target.value);setDestination(e.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Selecciona un pa\\xEDs\"}),countries.filter(c=>c.code!==origin).map(c=>/*#__PURE__*/_jsxs(\"option\",{value:c.code,children:[c.flag,\" \",c.name]},c.code))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"font-semibold text-blue-900\",children:\"Monto a enviar\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"w-full p-3 rounded-xl border\",placeholder:\"0\",value:formattedAmount,onChange:e=>handleAmountChange(e.target.value)})]}),rate&&receivedAmount&&/*#__PURE__*/_jsxs(motion.div,{initial:false,animate:{opacity:1,scale:1},className:\"p-4 mt-4 bg-white shadow-md rounded-2xl border\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"font-bold text-blue-900 text-center mb-3\",children:\"Resumen del env\\xEDo\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center text-lg\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold\",children:[originCountry.flag,\" \",originCountry.name]}),\" \",\"\\u2192\",\" \",/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold\",children:[destinationCountry.flag,\" \",destinationCountry.name]})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-center mt-3 text-blue-800\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Tasa:\"}),\" \",rate]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-center text-blue-800\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Operaci\\xF3n:\"}),\" \",operation===\"multiply\"?\"Multiplica\":\"Divide\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-center text-blue-800\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Monto enviado:\"}),\" \",formattedAmount]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-center text-green-700 font-bold text-xl mt-2\",children:[\"Recibe:\",\" \",new Intl.NumberFormat(\"de-DE\").format(receivedAmount),\" \",currency,\" \"]})]},\"\".concat(origin,\"-\").concat(destination,\"-\").concat(rate,\"-\").concat(receivedAmount)),canContinue&&/*#__PURE__*/_jsx(motion.button,{whileTap:{scale:0.95},className:\"w-full mt-6 bg-blue-700 text-white py-3 rounded-xl text-lg font-semibold shadow-md\",onClick:goNext,disabled:loading,children:loading?\"Creando transacci√≥n...\":\"Continuar\"})]});}","map":{"version":3,"names":["React","useState","useEffect","countries","motion","useNavigate","useApp","supabase","jsx","_jsx","jsxs","_jsxs","SelectCountries","console","log","navigate","user","origin","setOrigin","destination","setDestination","amount","setAmount","formattedAmount","setFormattedAmount","rate","setRate","operation","setOperation","currency","setCurrency","receivedAmount","setReceivedAmount","loading","setLoading","dbRates","setDbRates","loadRates","data","error","from","select","handleAmountChange","value","raw","replace","formatted","Intl","NumberFormat","format","length","match","find","r","origin_country","destination_country","calculated","parseFloat","Math","round","originCountry","c","code","flag","name","destinationCountry","canContinue","goNext","received_amount","insert","user_id","id","status","created_at","Date","toISOString","single","state","transactionId","err","alert","className","children","h1","initial","opacity","y","animate","onChange","e","target","map","filter","type","placeholder","div","scale","concat","button","whileTap","onClick","disabled"],"sources":["C:/Users/Usuario/Desktop/intento de app/src/pages/flows/SelectCountries.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { countries } from \"../../data/countries\";\r\nimport { motion } from \"framer-motion\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useApp } from \"../../context/AppContext\";\r\nimport { supabase } from \"../../supabaseClient\";\r\n\r\nexport default function SelectCountries() {\r\n  console.log(\"üìå Componente SelectCountries MONTADO\");\r\n\r\n  const navigate = useNavigate();\r\n  const { user } = useApp();\r\n\r\n  const [origin, setOrigin] = useState(\"\");\r\n  const [destination, setDestination] = useState(\"\");\r\n  const [amount, setAmount] = useState(\"\");\r\n  const [formattedAmount, setFormattedAmount] = useState(\"\");\r\n  const [rate, setRate] = useState(null);\r\n  const [operation, setOperation] = useState(null);\r\n  const [currency, setCurrency] = useState(null); // üëà moneda real desde DB\r\n  const [receivedAmount, setReceivedAmount] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [dbRates, setDbRates] = useState([]);\r\n\r\n  // ============================\r\n  // üî• 1. Cargar tasas desde Supabase\r\n  // ============================\r\n  useEffect(() => {\r\n    console.log(\"üìå useEffect ‚Üí Cargando tasas de Supabase‚Ä¶\");\r\n\r\n    const loadRates = async () => {\r\n      const { data, error } = await supabase.from(\"rates\").select(\"*\");\r\n\r\n      console.log(\"üì• Respuesta Supabase (rates):\", data);\r\n      console.log(\"‚ùå Error Supabase:\", error);\r\n\r\n      if (error) return;\r\n\r\n      setDbRates(data);\r\n    };\r\n    loadRates();\r\n  }, []);\r\n\r\n  // ============================\r\n  // üî• 2. Formateo del monto\r\n  // ============================\r\n  const handleAmountChange = (value) => {\r\n    console.log(\"‚å®Ô∏è Monto escrito:\", value);\r\n\r\n    const raw = value.replace(/\\D/g, \"\");\r\n    console.log(\"‚û°Ô∏è Monto sin formato:\", raw);\r\n\r\n    setAmount(raw);\r\n\r\n    if (!raw) {\r\n      console.log(\"‚ö†Ô∏è Monto vac√≠o ‚Üí limpiando\");\r\n      setFormattedAmount(\"\");\r\n      setReceivedAmount(null);\r\n      return;\r\n    }\r\n\r\n    const formatted = new Intl.NumberFormat(\"de-DE\").format(raw);\r\n    console.log(\"üßÆ Monto formateado:\", formatted);\r\n\r\n    setFormattedAmount(formatted);\r\n  };\r\n\r\n  // ============================\r\n  // üî• 3. C√°lculo con tasas\r\n  // ============================\r\n  useEffect(() => {\r\n    console.log(\"üîÑ useEffect CALCULATING...\");\r\n    console.log(\"üåç Origen:\", origin);\r\n    console.log(\"üéØ Destino:\", destination);\r\n    console.log(\"üíµ Amount:\", amount);\r\n    console.log(\"üìä dbRates:\", dbRates);\r\n\r\n    if (!origin || !destination || !amount || dbRates.length === 0) {\r\n      console.log(\"‚ö†Ô∏è Datos insuficientes para calcular\");\r\n      setRate(null);\r\n      setReceivedAmount(null);\r\n      return;\r\n    }\r\n\r\n    const match = dbRates.find(\r\n      (r) => r.origin_country === origin && r.destination_country === destination\r\n    );\r\n\r\n    console.log(\"üîç Resultado b√∫squeda tasa:\", match);\r\n\r\n    if (!match) {\r\n      console.log(\"‚ùå NO SE ENCONTR√ì TASA PARA:\", origin, \"‚Üí\", destination);\r\n      setRate(null);\r\n      setReceivedAmount(null);\r\n      return;\r\n    }\r\n\r\n    setRate(match.rate);\r\n    setOperation(match.operation);\r\n    setCurrency(match.currency); // üëà CARGAMOS moneda de la tabla\r\n\r\n    let calculated = 0;\r\n\r\n    console.log(\"üßÆ Operaci√≥n:\", match.operation);\r\n    console.log(\"üìà Rate:\", match.rate);\r\n\r\n    if (match.operation === \"multiply\") {\r\n      calculated = parseFloat(amount) * match.rate;\r\n      console.log(\"‚úñÔ∏è Multiplicando:\", amount, \"*\", match.rate, \"=\", calculated);\r\n    } else {\r\n      calculated = parseFloat(amount) / match.rate;\r\n      console.log(\"‚ûó Dividiendo:\", amount, \"/\", match.rate, \"=\", calculated);\r\n    }\r\n\r\n    console.log(\"üí∞ Resultado redondeado:\", Math.round(calculated));\r\n    setReceivedAmount(Math.round(calculated));\r\n  }, [origin, destination, amount, dbRates]);\r\n\r\n  const originCountry =\r\n    countries.find((c) => c.code === origin) || { flag: \"üåç\", name: \"\" };\r\n\r\n  const destinationCountry =\r\n    countries.find((c) => c.code === destination) || { flag: \"üåç\", name: \"\" };\r\n\r\n  const canContinue = origin && destination && amount && receivedAmount;\r\n\r\n  // ============================\r\n  // üî• 4. Crear transacci√≥n en Supabase\r\n  // ============================\r\n  const goNext = async () => {\r\n    console.log(\"‚û°Ô∏è goNext PRESSED\");\r\n    console.log(\"üßæ Datos enviados:\", {\r\n      origin,\r\n      destination,\r\n      amount: parseFloat(amount),\r\n      rate,\r\n      operation,\r\n      currency,\r\n      received_amount: receivedAmount,\r\n    });\r\n\r\n    if (!user) {\r\n      console.log(\"‚ùå No hay user en contexto\");\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from(\"transactions\")\r\n        .insert([\r\n          {\r\n            user_id: user.id,\r\n            origin_country: origin,\r\n            destination_country: destination,\r\n            amount: parseFloat(amount),\r\n            rate,\r\n            operation,\r\n            currency,\r\n            received_amount: receivedAmount,\r\n            status: \"Creando\",\r\n            created_at: new Date().toISOString(),\r\n          },\r\n        ])\r\n        .select()\r\n        .single();\r\n\r\n      console.log(\"üì• Respuesta INSERT:\", data);\r\n      console.log(\"‚ùå Error INSERT:\", error);\r\n\r\n      if (error) throw error;\r\n\r\n      navigate(\"/send/step2\", {\r\n        state: {\r\n          origin,\r\n          destination,\r\n          amount: parseFloat(amount),\r\n          rate,\r\n          receivedAmount,\r\n          operation,\r\n          currency, // üëà moneda desde DB\r\n          transactionId: data.id,\r\n        },\r\n      });\r\n    } catch (err) {\r\n      console.log(\"üî• Error creando transacci√≥n:\", err);\r\n      alert(\"Ocurri√≥ un error al crear la transacci√≥n.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"h-screen w-full overflow-auto scroll-pb-40 p-5 bg-gradient-to-b from-blue-50 to-yellow-50\">\r\n      <motion.h1\r\n        initial={{ opacity: 0, y: -15 }}\r\n        animate={{ opacity: 1, y: 0 }}\r\n        className=\"text-xl font-bold text-blue-900 mb-6 text-center\"\r\n      >\r\n        Selecciona los datos del env√≠o\r\n      </motion.h1>\r\n\r\n      {/* Pa√≠s Origen */}\r\n      <div className=\"mb-4\">\r\n        <label className=\"font-semibold text-blue-900\">Pa√≠s de env√≠o</label>\r\n        <select\r\n          className=\"w-full p-3 rounded-xl border\"\r\n          value={origin}\r\n          onChange={(e) => {\r\n            console.log(\"üá¶üá∫ Cambio pa√≠s origen ‚Üí\", e.target.value);\r\n            setOrigin(e.target.value);\r\n            setDestination(\"\");\r\n          }}\r\n        >\r\n          <option value=\"\">Selecciona un pa√≠s</option>\r\n          {countries.map((c) => (\r\n            <option key={c.code} value={c.code}>\r\n              {c.flag} {c.name}\r\n            </option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n\r\n      {/* Pa√≠s Destino */}\r\n      <div className=\"mb-4\">\r\n        <label className=\"font-semibold text-blue-900\">Pa√≠s destino</label>\r\n        <select\r\n          className=\"w-full p-3 rounded-xl border\"\r\n          value={destination}\r\n          onChange={(e) => {\r\n            console.log(\"üéØ Cambio pa√≠s destino ‚Üí\", e.target.value);\r\n            setDestination(e.target.value);\r\n          }}\r\n        >\r\n          <option value=\"\">Selecciona un pa√≠s</option>\r\n          {countries\r\n            .filter((c) => c.code !== origin)\r\n            .map((c) => (\r\n              <option key={c.code} value={c.code}>\r\n                {c.flag} {c.name}\r\n              </option>\r\n            ))}\r\n        </select>\r\n      </div>\r\n\r\n      {/* Monto */}\r\n      <div className=\"mb-4\">\r\n        <label className=\"font-semibold text-blue-900\">Monto a enviar</label>\r\n        <input\r\n          type=\"text\"\r\n          className=\"w-full p-3 rounded-xl border\"\r\n          placeholder=\"0\"\r\n          value={formattedAmount}\r\n          onChange={(e) => handleAmountChange(e.target.value)}\r\n        />\r\n      </div>\r\n\r\n      {/* Resumen */}\r\n      {rate && receivedAmount && (\r\n        <motion.div\r\n          key={`${origin}-${destination}-${rate}-${receivedAmount}`}\r\n          initial={false}\r\n          animate={{ opacity: 1, scale: 1 }}\r\n          className=\"p-4 mt-4 bg-white shadow-md rounded-2xl border\"\r\n        >\r\n          <h2 className=\"font-bold text-blue-900 text-center mb-3\">\r\n            Resumen del env√≠o\r\n          </h2>\r\n\r\n          <div className=\"text-center text-lg\">\r\n            <span className=\"font-semibold\">\r\n              {originCountry.flag} {originCountry.name}\r\n            </span>{\" \"}\r\n            ‚Üí{\" \"}\r\n            <span className=\"font-semibold\">\r\n              {destinationCountry.flag} {destinationCountry.name}\r\n            </span>\r\n          </div>\r\n\r\n          <p className=\"text-center mt-3 text-blue-800\">\r\n            <strong>Tasa:</strong> {rate}\r\n          </p>\r\n\r\n          <p className=\"text-center text-blue-800\">\r\n            <strong>Operaci√≥n:</strong>{\" \"}\r\n            {operation === \"multiply\" ? \"Multiplica\" : \"Divide\"}\r\n          </p>\r\n\r\n          <p className=\"text-center text-blue-800\">\r\n            <strong>Monto enviado:</strong> {formattedAmount}\r\n          </p>\r\n\r\n          <p className=\"text-center text-green-700 font-bold text-xl mt-2\">\r\n            Recibe:{\" \"}\r\n            {new Intl.NumberFormat(\"de-DE\").format(receivedAmount)}{\" \"}\r\n            {currency} {/* üëà MONEDA REAL DESDE LA BASE */}\r\n          </p>\r\n        </motion.div>\r\n      )}\r\n\r\n      {/* Bot√≥n continuar */}\r\n      {canContinue && (\r\n        <motion.button\r\n          whileTap={{ scale: 0.95 }}\r\n          className=\"w-full mt-6 bg-blue-700 text-white py-3 rounded-xl text-lg font-semibold shadow-md\"\r\n          onClick={goNext}\r\n          disabled={loading}\r\n        >\r\n          {loading ? \"Creando transacci√≥n...\" : \"Continuar\"}\r\n        </motion.button>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}